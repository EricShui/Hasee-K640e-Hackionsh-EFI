# Hasee-K640e-Hackionsh-EFI

## 关于配置：

- CPU：i7 4710 mq
- 显卡: HD4600
- ~~独显：GT940M~~（已屏蔽）
- 声卡：VIT1820A（声卡ID可使用3、33或是推荐65）
- 网卡：BCM94352HMB



## 配置文件信息：

除机身自带SD卡槽、Siri几乎无法听到声音（这电脑自带mic太烂或是AppleACL无法完全正常驱动）无法使用外，触控板可以使用，但是需要将键盘驱动 VoodooPS2Controller.kext（支持三个及以上按键的快捷键，但不支持这款电脑的触摸板） 换为 ApplePS2SmartTouchPad.kext（部分键盘快捷键不支持，去年的消息是作者家庭有了孩子，要照顾家庭，几乎没有更新的可能），自行添加完整的 .kext 后缀，文件在 CLOVER/kexts/Other内， 我写了一个python脚本，可直接更换去的并且重建缓存再重启，需要请留言， 其余功能正常。日常完美使用，切不可随意修改机型，部分型号不支持HDMI，目前配置HDMI视频、音频皆正常，支持热插拔。不支持休眠功能，安装后请关闭休眠。

## 兼容性：

理论上从macOS 10.11 至 10.14 所有版本皆不需要修改配置文件，仅需升级最新驱动和Clover进行支持，各驱动建议放在 Clover 内，不要放入系统。支持使用RecoveryHD + TimeMachine进行系统备份还原（谁用谁知道）。鉴于10.15没有什么特色，10.14多了暗色模式，10.15虽支持iPad分屏，但就我试下来，画面很糊，且我没有此需求，就没有进行升级或是适配。最新的10.16稳定版还未发布，暂时也不打算升级。

## 叨叨：



这台电脑经历了从10.11 到如今的10.14，因为太懒，仅在[远景论坛](http://bbs.pcbeta.com/)分享过，所以后面根据心情更新吧……



## 2020.8.2更新

最近很忙，好几天没开电脑，然后找时间更新了电脑引导，已经成功迁移到 OpenCore 。

大部分功能和之前一致，除 HDMI部分 ，现阶段不支持插着 HDMI 开机，内核会随机崩溃，然后自动重启。进入系统后 HDMI 可用也可热插拔，HDMI 音频也正常。

试过多个缓冲帧（AAPL,ig-platform-id） id 皆无效，推荐的缓冲帧 id 是：0x0D260007（0700260D）  和  0x0A260000（0000260A），我一直使用的是前者，但最近发现我的外接显示器使用后者时显示效果更好，还是更推荐前者。可使用 [ProperTree](https://github.com/corpnewt/ProperTree)   或是 PlistEdit 打开配置文件，找到 DeviceProperties - Add - PciRoot(0x0)/Pci(0x2,0x0) - AAPL,ig-platform-id 将这一项的值换为 0700260D 。

将FakeSMC、ACPIBatteryManager 换为 VirtualSMC 套件，除内屏亮度调节更顺滑（貌似是可调阶数增加了）外没有明显改变。

在换为 OpenCore 后将系统在线升级到了 10.15.6 。调驱动系统崩溃，进入 Recovery 模式使用 TimeMachine 进行恢复，恢复完系统盘变成了 HFS+ 格式（引导和系统不在同一块硬盘上）。个人感觉，在固态硬盘下 APFS 系统会比 HFS+ 下更快，卡顿更少。查询后得知可以在 Recovery 模式下，进入磁盘工具，先推出想要转换为 APFS 格式的硬盘或是分区。在磁盘工具左上角的编辑内选择转换为 APFS 。成功转换后无法从那个磁盘启动，在 OC 引导界面也无法读取。然后尝试从 Recovery 模式内重装覆盖同版本的系统，进入 Recovery 模式选择重装系统。经过漫长等待，成功转换为 APFS 分区，为验证 OC 配置，进入10.14.6 后就升级到了 10.15.6 。一切顺利，但插 HDMI 开机重启，开机后可正常使用，支持热插拔，暂时没有修补缓冲帧，修补后没有体现出实质改善，后删除。 （这台电脑 NVRAM 有问题，很难清空，刷 BIOS 、COMS 放电或者 OC 的清空功能感觉都没能彻底清空）



## 2020.8.8更新



1、OC 版本更新到0.6

2、修正了 USB 端口

3、HDMI 问题仍未修复



